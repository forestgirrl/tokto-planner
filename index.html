<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 æ±äº¬ F1 æ«»èŠ±è‡ªç”±è¡Œ</title>
    
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;500;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.css"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        bg: '#F7F4EB', // ç±³è‰²ç´‹ç†èƒŒæ™¯
                        primary: '#FF8E8E', // æš–ç²‰è‰²
                        secondary: '#A6B999', // å¤§åœ°ç¶ 
                        accent: '#E6C683', // æš–é»ƒ
                        text: '#5A544B', // æš–ç°è‰²æ–‡å­—
                        card: '#FFFFFF',
                        shadow: '#E0E5D5',
                    },
                    fontFamily: {
                        sans: ['"M PLUS Rounded 1c"', 'sans-serif'],
                    },
                    boxShadow: {
                        'soft': '4px 4px 0px #E0E5D5',
                        'soft-active': '2px 2px 0px #E0E5D5',
                        'float': '0 10px 15px -3px rgba(0, 0, 0, 0.05)',
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-color: #F7F4EB;
            color: #5A544B;
            /* æ·»åŠ ä¸€é»é»å™ªé»ç´‹ç†è³ªæ„Ÿ */
            background-image: radial-gradient(#E0E5D5 1px, transparent 1px);
            background-size: 20px 20px;
            -webkit-tap-highlight-color: transparent;
        }
        /* éš±è— Scrollbar ä½†ä¿æŒåŠŸèƒ½ */
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .app-container {
            padding-bottom: 100px; /* é ç•™åº•éƒ¨å°èˆªç©ºé–“ */
        }
    </style>
</head>
<body class="antialiased">

<div id="app" class="app-container min-h-screen relative">

    <header class="relative w-full z-10">
        <div class="h-[180px] w-full overflow-hidden relative">
            <img :src="headerImage" class="w-full h-full object-cover object-center" alt="Header Image" @error="handleImgError">
            <div class="absolute inset-0 bg-gradient-to-t from-black/30 to-transparent"></div>
            
            <div class="absolute top-6 right-6 text-right text-white drop-shadow-md">
                <h1 class="text-2xl font-extrabold tracking-wide">2026 æ±äº¬ F1</h1>
                <p class="text-sm font-bold opacity-90">03/21 - 04/04</p>
            </div>
        </div>
    </header>

    <main class="relative -mt-8 bg-[#F7F4EB] rounded-t-[30px] z-20 min-h-screen px-4 pt-6 shadow-[0_-5px_20px_rgba(0,0,0,0.05)]">
        
        <div class="flex justify-between items-center mb-6 overflow-x-auto hide-scrollbar gap-2">
            <button v-for="tab in tabs" :key="tab.id" 
                @click="currentTab = tab.id"
                :class="['flex-1 py-3 px-2 rounded-2xl flex flex-col items-center justify-center transition-all duration-200 border-2', 
                currentTab === tab.id ? 'bg-white border-primary shadow-soft text-primary transform -translate-y-1' : 'bg-white/50 border-transparent text-gray-400']">
                <i :class="[tab.icon, 'text-xl mb-1']"></i>
                <span class="text-xs font-bold">{{ tab.name }}</span>
            </button>
        </div>

        <div v-if="currentTab === 'schedule'" class="animate-fade-in">
            
            <div class="flex space-x-3 overflow-x-auto hide-scrollbar mb-6 py-2">
                <div v-for="(day, index) in scheduleDays" :key="index"
                     @click="selectedDayIndex = index"
                     :class="['flex-shrink-0 flex flex-col items-center justify-center w-16 h-20 rounded-2xl border-2 cursor-pointer transition-all',
                     selectedDayIndex === index ? 'bg-primary border-primary text-white shadow-soft' : 'bg-white border-transparent text-gray-400']">
                    <span class="text-xs font-bold uppercase">{{ day.weekday }}</span>
                    <span class="text-2xl font-extrabold">{{ day.date }}</span>
                </div>
            </div>

            <div class="bg-gradient-to-r from-[#AEC0F0] to-[#CFDEF3] rounded-3xl p-4 mb-6 flex justify-between items-center shadow-soft text-white relative overflow-hidden">
                <div class="z-10">
                    <div class="text-sm font-bold opacity-90">Tokyo, Japan</div>
                    <div class="text-3xl font-extrabold mt-1">12Â°C</div>
                    <div class="text-xs opacity-80">é«”æ„Ÿ 10Â°C</div>
                </div>
                <div class="z-10 text-4xl">
                    <i class="fa-solid fa-cloud-sun"></i>
                </div>
                <div class="absolute -right-4 -bottom-4 w-24 h-24 bg-white/20 rounded-full"></div>
            </div>

            <div class="space-y-4 relative pb-24">
                <div class="absolute left-6 top-4 bottom-0 w-0.5 bg-gray-300 border-l-2 border-dashed border-gray-300"></div>

                <div v-for="(event, index) in currentDayEvents" :key="event.id" class="relative pl-14 group">
                    
                    <div v-if="index > 0 || index === 0" class="absolute -top-3 left-12 right-0 flex items-center justify-center mb-2">
                         <div class="bg-white/80 px-2 py-1 rounded-full text-[10px] text-gray-500 shadow-sm border border-gray-100 flex items-center gap-1">
                            <i :class="getTransportIcon(event.transportType)"></i>
                            <span>{{ getTransportTime(index) }}</span>
                         </div>
                    </div>

                    <div class="absolute left-0 top-4 w-12 text-center">
                        <div class="text-xs font-bold text-gray-500">{{ event.time }}</div>
                        <div class="absolute right-[-29px] top-1.5 w-4 h-4 rounded-full border-2 border-white shadow-sm z-10" :style="{ backgroundColor: getCategoryColor(event.category) }"></div>
                    </div>

                    <div class="bg-white rounded-2xl p-4 border-2 border-transparent hover:border-primary/30 transition-all shadow-soft active:scale-95 cursor-pointer relative overflow-hidden" 
                         @click="openMap(event.location)">
                        
                        <div v-if="event.category === 'flight'" class="flex justify-between items-center mb-2 border-b border-dashed border-gray-200 pb-2">
                            <span class="text-xs font-bold text-blue-500"><i class="fa-solid fa-plane-departure mr-1"></i>èˆªç­è³‡è¨Š</span>
                            <span class="text-xs text-gray-400">{{ event.subTitle }}</span>
                        </div>

                        <div class="flex justify-between items-start">
                            <div>
                                <h3 class="font-bold text-lg text-text">{{ event.title }}</h3>
                                <div class="text-xs text-gray-400 mt-1 flex items-center gap-1">
                                    <i class="fa-solid fa-location-dot text-primary"></i> {{ event.location }}
                                </div>
                            </div>
                            <button class="w-8 h-8 rounded-full bg-gray-50 flex items-center justify-center text-gray-400 hover:bg-primary hover:text-white transition-colors">
                                <i class="fa-solid fa-location-arrow"></i>
                            </button>
                        </div>

                        <div class="flex flex-wrap gap-2 mt-3">
                            <span v-if="event.ticket" class="text-[10px] px-2 py-1 bg-yellow-100 text-yellow-700 rounded-lg">
                                <i class="fa-solid fa-ticket mr-1"></i>{{ event.ticket }}
                            </span>
                            <span v-if="event.category !== 'flight'" class="text-[10px] px-2 py-1 bg-gray-100 text-gray-600 rounded-lg">
                                <i class="fa-regular fa-clock mr-1"></i>{{ event.openTime || 'ç‡Ÿæ¥­ä¸­' }}
                            </span>
                        </div>
                    </div>
                </div>

                <button @click="showAddModal = true" class="fixed bottom-24 right-6 w-14 h-14 bg-primary text-white rounded-full shadow-lg flex items-center justify-center text-2xl hover:scale-110 active:scale-90 transition-transform z-30">
                    <i class="fa-solid fa-plus"></i>
                </button>
            </div>
        </div>

        <div v-if="currentTab === 'bookings'" class="animate-fade-in space-y-4 pb-24">
            <h2 class="text-xl font-bold mb-4">æˆ‘çš„é è¨‚</h2>
            
            <div class="bg-white rounded-2xl overflow-hidden shadow-soft" v-for="hotel in bookings.hotels" :key="hotel.id">
                <div class="h-32 bg-gray-200 relative">
                     <img :src="'https://placehold.co/600x400/E0E5D5/5A544B?text=' + hotel.name.substring(0,3)" class="w-full h-full object-cover">
                    <div class="absolute bottom-2 left-2 bg-white/90 px-2 py-1 rounded-lg text-xs font-bold text-primary">
                        {{ hotel.nights }} æ™š
                    </div>
                </div>
                <div class="p-4">
                    <h3 class="font-bold text-lg mb-1">{{ hotel.name }}</h3>
                    <p class="text-xs text-gray-500 mb-2"><i class="fa-solid fa-map-pin mr-1"></i>{{ hotel.address }}</p>
                    <div class="flex justify-between text-xs bg-bg p-2 rounded-lg">
                        <div class="text-center">
                            <div class="text-gray-400">Check-in</div>
                            <div class="font-bold">{{ hotel.checkIn }}</div>
                        </div>
                        <div class="text-center border-l border-gray-300 pl-4">
                            <div class="text-gray-400">Check-out</div>
                            <div class="font-bold">{{ hotel.checkOut }}</div>
                        </div>
                    </div>
                </div>
            </div>

             <div class="bg-white rounded-2xl shadow-soft relative overflow-hidden" v-for="flight in bookings.flights" :key="flight.id">
                 <div class="bg-primary h-2 w-full"></div>
                 <div class="p-4">
                     <div class="flex justify-between items-center mb-4">
                         <div class="text-2xl font-black text-text">{{ flight.from }}</div>
                         <div class="flex-1 mx-4 border-b-2 border-dashed border-gray-300 relative text-center">
                             <i class="fa-solid fa-plane text-gray-300 absolute -top-3 left-1/2 transform -translate-x-1/2 bg-white px-1"></i>
                         </div>
                         <div class="text-2xl font-black text-text">{{ flight.to }}</div>
                     </div>
                     <div class="flex justify-between text-sm">
                         <div>
                             <p class="text-gray-400 text-xs">FLIGHT</p>
                             <p class="font-bold">{{ flight.code }}</p>
                         </div>
                         <div class="text-right">
                             <p class="text-gray-400 text-xs">DATE</p>
                             <p class="font-bold">{{ flight.date }}</p>
                         </div>
                     </div>
                 </div>
                 <div class="absolute left-[-10px] top-1/2 w-5 h-5 bg-[#F7F4EB] rounded-full"></div>
                 <div class="absolute right-[-10px] top-1/2 w-5 h-5 bg-[#F7F4EB] rounded-full"></div>
             </div>
        </div>

        <div v-if="currentTab === 'expense'" class="animate-fade-in pb-24">
            <div class="bg-text text-white rounded-3xl p-6 shadow-soft mb-6 relative overflow-hidden">
                <div class="relative z-10">
                    <p class="text-sm opacity-70">ç¸½æ”¯å‡º (TWD)</p>
                    <h2 class="text-3xl font-bold mt-1">$ {{ totalExpense.toLocaleString() }}</h2>
                    <div class="mt-4 flex gap-4 text-sm">
                        <div>
                            <span class="block opacity-50 text-xs">JPY</span>
                            <span class="font-bold">Â¥ {{ totalExpenseJpy.toLocaleString() }}</span>
                        </div>
                        <div>
                            <span class="block opacity-50 text-xs">åŒ¯ç‡ä¼°ç®—</span>
                            <span class="font-bold">0.22</span>
                        </div>
                    </div>
                </div>
                <div class="absolute -right-6 -bottom-10 w-32 h-32 bg-white/10 rounded-full"></div>
            </div>

            <div class="flex justify-between items-center mb-4">
                <h3 class="font-bold text-lg">æœ€è¿‘æ”¯å‡º</h3>
                <button class="text-primary text-sm font-bold" @click="addExpenseModal = true">+ æ–°å¢</button>
            </div>

            <div class="space-y-3">
                <div v-for="item in expenses" :key="item.id" class="bg-white p-4 rounded-2xl flex justify-between items-center shadow-sm">
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 rounded-full bg-bg flex items-center justify-center text-lg">
                            {{ getCategoryIcon(item.category) }}
                        </div>
                        <div>
                            <div class="font-bold text-sm">{{ item.title }}</div>
                            <div class="text-xs text-gray-400">{{ item.date }}</div>
                        </div>
                    </div>
                    <div class="text-right">
                        <div class="font-bold text-text">Â¥{{ item.amount }}</div>
                        <div class="text-xs text-gray-400">~${{ Math.round(item.amount * 0.22) }}</div>
                    </div>
                </div>
            </div>
        </div>

        <div v-if="currentTab === 'planning'" class="animate-fade-in pb-24">
            <h2 class="text-xl font-bold mb-4">å¾…è¾¦æ¸…å–®</h2>
            <div class="space-y-2 mb-8">
                <div v-for="todo in todos" :key="todo.id" class="flex items-center bg-white p-3 rounded-xl shadow-sm" @click="todo.done = !todo.done">
                    <div :class="['w-5 h-5 rounded-md border-2 mr-3 flex items-center justify-center transition-colors', todo.done ? 'bg-primary border-primary' : 'border-gray-300']">
                        <i v-if="todo.done" class="fa-solid fa-check text-white text-xs"></i>
                    </div>
                    <span :class="['font-medium transition-all', todo.done ? 'text-gray-400 line-through' : 'text-text']">{{ todo.text }}</span>
                </div>
            </div>

            <h2 class="text-xl font-bold mb-4">è³¼ç‰©æ¸…å–®</h2>
             <div class="grid grid-cols-2 gap-4">
                <div v-for="item in shoppingList" :key="item.id" class="bg-white p-2 rounded-xl shadow-soft">
                    <div class="h-24 bg-gray-100 rounded-lg mb-2 relative overflow-hidden group">
                        <img v-if="item.img" :src="item.img" class="w-full h-full object-cover">
                        <div v-else class="w-full h-full flex items-center justify-center text-gray-300">
                            <i class="fa-solid fa-image"></i>
                        </div>
                        <button class="absolute top-1 right-1 bg-red-400 text-white w-6 h-6 rounded-full text-xs opacity-0 group-hover:opacity-100 transition-opacity" @click="removeShoppingItem(item.id)">x</button>
                    </div>
                    <div class="text-center font-bold text-sm">{{ item.name }}</div>
                </div>
                <div class="bg-bg border-2 border-dashed border-gray-300 rounded-xl flex items-center justify-center h-36 cursor-pointer" @click="uploadImage">
                    <div class="text-center text-gray-400">
                        <i class="fa-solid fa-camera mb-1"></i>
                        <div class="text-xs">æ–°å¢ç‰©å“</div>
                    </div>
                </div>
             </div>
        </div>

    </main>

    <div v-if="showAddModal" class="fixed inset-0 z-50 flex items-end sm:items-center justify-center bg-black/50 backdrop-blur-sm" @click.self="showAddModal = false">
        <div class="bg-white w-full sm:w-96 rounded-t-3xl sm:rounded-3xl p-6 shadow-2xl animate-slide-up">
            <h3 class="text-xl font-bold mb-4">æ–°å¢è¡Œç¨‹</h3>
            <div class="space-y-4">
                <input v-model="newEvent.title" placeholder="è¡Œç¨‹åç¨±" class="w-full bg-bg p-3 rounded-xl outline-none focus:ring-2 ring-primary/50">
                <select v-model="newEvent.category" class="w-full bg-bg p-3 rounded-xl outline-none">
                    <option value="spot">æ™¯é»</option>
                    <option value="food">ç¾é£Ÿ</option>
                    <option value="shop">è³¼ç‰©</option>
                </select>
                <div class="flex gap-2">
                    <input type="time" v-model="newEvent.time" class="flex-1 bg-bg p-3 rounded-xl outline-none">
                </div>
                <button @click="addEvent" class="w-full bg-primary text-white py-3 rounded-xl font-bold shadow-lg shadow-primary/30">ç¢ºèªæ–°å¢</button>
            </div>
        </div>
    </div>

</div>

<script>
    const { createApp, ref, computed } = Vue;

    createApp({
        setup() {
            // Data
            const currentTab = ref('schedule');
            const selectedDayIndex = ref(0);
            const showAddModal = ref(false);
            const headerImage = ref('images/f1cat.jpg'); // é è¨­åœ–ç‰‡è·¯å¾‘

            // Tabs Configuration
            const tabs = [
                { id: 'schedule', name: 'è¡Œç¨‹', icon: 'fa-regular fa-calendar-days' },
                { id: 'bookings', name: 'é å®š', icon: 'fa-solid fa-ticket' },
                { id: 'expense', name: 'è¨˜å¸³', icon: 'fa-solid fa-yen-sign' },
                { id: 'planning', name: 'æº–å‚™', icon: 'fa-solid fa-list-check' },
            ];

            // Schedule Data Structure
            const scheduleDays = [
                { date: '03', weekday: 'FRI', fullDate: '2026-01-03' },
                { date: '04', weekday: 'SAT', fullDate: '2026-01-04' },
                { date: '05', weekday: 'SUN', fullDate: '2026-01-05' },
                { date: '06', weekday: 'MON', fullDate: '2026-01-06' },
                { date: '07', weekday: 'TUE', fullDate: '2026-01-07' },
                { date: '08', weekday: 'WED', fullDate: '2026-01-08' },
                { date: '09', weekday: 'THU', fullDate: '2026-01-09' },
                { date: '10', weekday: 'FRI', fullDate: '2026-01-10' },
                { date: '11', weekday: 'SAT', fullDate: '2026-01-11' },
            ];

            // Events Data (Reactive)
            const events = ref({
                0: [ // Day 1
                    { id: 1, title: 'TPE -> NRT', category: 'flight', time: '08:50', location: 'æ¡ƒåœ’åœ‹éš›æ©Ÿå ´ T2', subTitle: 'BR198', transportType: 'flight' },
                    { id: 2, title: 'Check-in é£¯åº—', category: 'hotel', time: '14:30', location: 'Sotetsu Fresa Inn Daimon', transportType: 'train' },
                    { id: 3, title: 'æ±äº¬éµå¡”å·¡ç¦®', category: 'spot', time: '16:00', location: 'æ±äº¬éµå¡”', openTime: '09:00-23:00', ticket: 'å·²è³¼ç¥¨', transportType: 'walk' }
                ],
                1: [ // Day 2
                    { id: 4, title: 'å‰å¾€è¿ªå£«å°¼æµ·æ´‹', category: 'spot', time: '08:00', location: 'DisneySea', ticket: 'é›»å­æ†‘è­‰', transportType: 'train' },
                    { id: 5, title: 'å¤¢å¹»æ³‰é„‰å¤§é£¯åº—', category: 'hotel', time: '15:00', location: 'Fantasy Springs Hotel', transportType: 'walk' }
                ]
            });

            // Booking Data
            const bookings = ref({
                flights: [
                    { id: 1, from: 'TPE', to: 'NRT', code: 'BR198', date: '03 JAN', time: '08:50' },
                    { id: 2, from: 'NRT', to: 'TPE', code: 'BR197', date: '11 JAN', time: '02:00' }
                ],
                hotels: [
                    { id: 1, name: 'Sotetsu Fresa Inn Daimon', address: 'æ±äº¬å¤§é–€ç«™', checkIn: '01/03', checkOut: '01/04', nights: 1 },
                    { id: 2, name: 'DisneySea Fantasy Springs', address: 'èˆæ¿±', checkIn: '01/04', checkOut: '01/05', nights: 1 }
                ]
            });

            // Expense Data
            const expenses = ref([
                { id: 1, title: 'æˆç”°ç‰¹å¿«è»Šç¥¨', amount: 4000, category: 'transport', date: '01/03' },
                { id: 2, title: 'ä¾¿åˆ©å•†åº—æ™šé¤', amount: 1200, category: 'food', date: '01/03' }
            ]);

            const todos = ref([
                { id: 1, text: 'è³¼è²·æ—…éŠä¿éšª', done: true },
                { id: 2, text: 'é ç´„ç¶²å¡/æ¼«éŠ', done: false },
                { id: 3, text: 'ç¢ºèªè­·ç…§æ•ˆæœŸ', done: false }
            ]);

            const shoppingList = ref([
                { id: 1, name: 'åˆåŠ›ä»–å‘½', img: '' },
                { id: 2, name: 'F1 å‘¨é‚Š', img: '' }
            ]);

            // New Event Temp Data
            const newEvent = ref({ title: '', category: 'spot', time: '10:00' });

            // Computed
            const currentDayEvents = computed(() => {
                return events.value[selectedDayIndex.value] || [];
            });

            const totalExpenseJpy = computed(() => {
                return expenses.value.reduce((sum, item) => sum + item.amount, 0);
            });

            const totalExpense = computed(() => {
                return Math.round(totalExpenseJpy.value * 0.22);
            });

            // Methods
            const getCategoryColor = (cat) => {
                const map = { flight: '#3B82F6', spot: '#FF8E8E', food: '#F59E0B', hotel: '#8B5CF6', shop: '#10B981' };
                return map[cat] || '#9CA3AF';
            };

            const getCategoryIcon = (cat) => {
                const map = { transport: 'ğŸš†', food: 'ğŸ±', shop: 'ğŸ›ï¸' };
                return map[cat] || 'ğŸ’°';
            };

            const getTransportIcon = (type) => {
                return type === 'walk' ? 'fa-solid fa-person-walking' : 'fa-solid fa-train-subway';
            };

            const getTransportTime = (index) => {
                // Mock logic: æ ¹æ“š index çµ¦äºˆå‡æ™‚é–“
                const times = ['45 min', '15 min', '10 min'];
                return times[index % 3];
            };

            const openMap = (location) => {
                window.open(`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(location)}`, '_blank');
            };

            const addEvent = () => {
                if(!events.value[selectedDayIndex.value]) events.value[selectedDayIndex.value] = [];
                events.value[selectedDayIndex.value].push({
                    id: Date.now(),
                    title: newEvent.value.title,
                    category: newEvent.value.category,
                    time: newEvent.value.time,
                    location: 'TBC',
                    transportType: 'walk'
                });
                showAddModal.value = false;
                newEvent.value = { title: '', category: 'spot', time: '10:00' };
                // Sort by time
                events.value[selectedDayIndex.value].sort((a,b) => a.time.localeCompare(b.time));
            };
            
            const handleImgError = (e) => {
                // å¦‚æœæ‰¾ä¸åˆ°åœ–ç‰‡ï¼Œä½¿ç”¨ Placehold
                e.target.src = "https://placehold.co/1920x400/E6C683/FFFFFF?text=F1+Cat+Banner";
            };

            const removeShoppingItem = (id) => {
                 shoppingList.value = shoppingList.value.filter(i => i.id !== id);
            };

            const uploadImage = () => {
                const name = prompt("è«‹è¼¸å…¥å•†å“åç¨±");
                if(name) shoppingList.value.push({ id: Date.now(), name, img: '' });
            }

            return {
                currentTab, tabs, scheduleDays, selectedDayIndex, currentDayEvents,
                bookings, expenses, todos, shoppingList,
                totalExpense, totalExpenseJpy, showAddModal, newEvent, headerImage,
                getCategoryColor, getCategoryIcon, getTransportIcon, getTransportTime,
                openMap, addEvent, handleImgError, removeShoppingItem, uploadImage
            };
        }
    }).mount('#app');
</script>
</body>
</html>
